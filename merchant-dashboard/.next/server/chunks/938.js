exports.id=938,exports.ids=[938],exports.modules={1842:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>n});let r="https://api.apiblockchain.io",api=async(e,t="GET",a)=>{let n=`${r}${e}`,i=await fetch(n,{method:t,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0,credentials:"include"});if(!i.ok)throw Error(await i.text());return i.json()},login=async(e,t)=>{let a=await fetch(`${r}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,password:t}),credentials:"include"});if(!a.ok)throw Error(await a.text());let n=await a.json();return n},protectedApi=async(e,t="GET",a)=>{let n=`${r}${e}`,doRequest=async e=>{let r={"Content-Type":"application/json"};return e&&(r.Authorization=`Bearer ${e}`),fetch(n,{method:t,headers:r,body:a?JSON.stringify(a):void 0,credentials:"include"})},i=await doRequest(void 0);if(401===i.status){let e=await fetch(`${r}/refresh`,{method:"POST",credentials:"include"});if(e.ok){let t=await e.json();t?.access_token||t?.token}}if(401===i.status)throw Error("Unauthorized");if(!i.ok)throw Error(await i.text());return i.json()},n={api,login,protectedApi}},4938:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>MyApp});var r=a(997);a(6764);var n=a(6689),i=a(1163),s=a(1842);function Header(){let e=(0,i.useRouter)(),[t,a]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null),[l,d]=(0,n.useState)(null);return((0,n.useEffect)(()=>{a(!0);try{let e=localStorage.getItem("merchant_email");d(e);let t=localStorage.getItem("merchant_name");o(t)}catch(e){}let e=!0;return(async()=>{try{let t=await s.ZP.protectedApi("/merchant/me");if(!e)return;o(t?.name||t?.merchant_name||t?.display_name||"Merchant"),d(t?.email||t?.merchant_email||t?.contact_email||null)}catch{try{let t=await s.ZP.protectedApi("/merchant/usage");if(!e)return;o(t?.merchant_name||t?.merchant||"Merchant"),d(t?.merchant_email||t?.email||null)}catch{}}})(),()=>{e=!1}},[]),t)?(0,r.jsxs)("header",{className:"flex justify-between items-center p-4 border-b shadow-sm",style:{background:"#FFFFFF"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded bg-gradient-to-br from-primary to-secondary text-white font-extrabold tracking-tight",children:r.jsx("span",{className:"text-sm",children:"APIBl"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:"Dashboard â€” Invoicing Merchant"}),l?r.jsx("p",{className:"text-sm text-slate-600",children:l}):null]})]}),r.jsx("button",{onClick:function(){e.push("/login")},className:"ml-auto btn btn-ghost",children:"Logout"})]}):r.jsx("header",{className:"h-16",style:{background:"var(--ab-surface)"}})}function MyApp({Component:e,pageProps:t}){return(0,r.jsxs)(r.Fragment,{children:[r.jsx(Header,{}),r.jsx(e,{...t})]})}},6764:()=>{}};